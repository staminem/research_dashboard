<!DOCTYPE html>
<html lan="en">
    <head>
        <br>
        <title>Research Dashboard</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <script type="text/javascript"> function spinner() {document.getElementsById("img").style.display = "block";}</script>
        <script type="module">import Tags from "https://cdn.jsdelivr.net/npm/bootstrap5-tags@1.0.0/tags.min.js";Tags.init();</script>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/jszip-2.5.0/dt-1.10.25/af-2.3.7/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/cr-1.5.4/date-1.1.0/fc-3.3.3/fh-3.1.9/kt-2.6.2/r-2.2.9/rg-1.1.3/rr-1.2.8/sc-2.0.4/sb-1.1.0/sp-1.3.0/sl-1.3.3/datatables.min.css"/>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/v/bs5/jszip-2.5.0/dt-1.10.25/af-2.3.7/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/cr-1.5.4/date-1.1.0/fc-3.3.3/fh-3.1.9/kt-2.6.2/r-2.2.9/rg-1.1.3/rr-1.2.8/sc-2.0.4/sb-1.1.0/sp-1.3.0/sl-1.3.3/datatables.min.js"></script>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    </head>
    <body>
    <div class="container">
        <h2>Research Dashboard</h2>
        <br>
        <h4>Research dashboard showing results for entered PubMed IDs</h4>
    </div>
    <br>
    <div class="container">
    <p>Add papers from PubMed that are of interest to you by entering their PubMed ID in the below form to compare them in an overview. A table will be generated containing key information on each paper.
    You can sort the table by clicking on the respective column header. Click on the "Abstract" button in the rightmost column to see the abstract of the respective paper pop up.<br>
        Note that a valid email address as well as a name for your project are necessary for some of the functions that are working in the background.<br>
    Scroll to the bottom of the page to display generated plots.</p>
    </div>
    <br>
    <div class="container">
    <form class="needs-validation" id="form" novalidate action="{{ url_for('process_input') }}" method="post">
        <div class="form-group row">
            <label for="user_email" class="col-sm-2 col-form-label">Email</label>
            <div class="col-sm-10">
                <input type="email" class="form-control" name="user_email" id="user_email" placeholder="username@domain.com" style="w-50" required>
                <small id="user_emailhelp" class="form-text text-muted">Enter a valid email address</small>
                <div class="invalid-feedback">Please provide a valid email address!</div>
            </div>
        </div>
        <br>
        <div class="form-group row">
            <label for="user_tool" class="col-sm-2 col-form-label">User Tool</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="user_tool" id="user_tool" placeholder="my_research_project" required>
                <small id="user_toolhelp" class="form-text text-muted">Choose any name for your research project. Separate words with underscores (_).</small>
                <div class="invalid-feedback">Please provide a project name, make sure to separate single words with underscores!</div>
            </div>
        </div>
        <br>
          <div class="form-group row">
            <label for="pmids[]" class="col-sm-2 col-form-label">Pubmed IDs</label>
            <div class="col-sm-10">
                <select class="form-select" name="pmids[]" id="pmids[]" data-allow-new="true" multiple required>
                    <option selected disabled hidden value="">Enter Pubmed ID and hit Enter/Return...</option>
                </select>
                <small id="pmidhelp" class="form-text text-muted">Enter any number of Pubmed IDs and hit Enter/Return to add them to the list</small>
                <div class="invalid-feedback">Please enter at least one valid Pubmed ID!</div>
            </div>
        </div>
        <br>
        <div class="form-group row">
            <label for="keywords[]" class="col-sm-2 col-form-label">Keywords</label>
            <div class="col-sm-10">
                <select class="form-select" name="keywords[]" id="keywords[]" data-allow-new="true" multiple>
                    <option selected disabled hidden value="">Enter keyword and hit Enter/Return...</option>
                </select>
                <small id="keywordhelp" class="form-text text-muted">Enter keywords relevant to your project and hit Enter/Return to add them to the list</small>
            </div>
        </div>
        <br>
        <div class="container">
            <input class="btn btn-primary" id="submit" type="submit" onclick="spinner()">
            <input class="btn btn-danger" id="reset" type="reset">
        </div>
    </form>
    </div>
    <br>
    <div class="d-flex justify-content-center">
        <div class="spinner-border" role="status" id="img" style="display:none">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    </body>
    <footer class="footer mt-auto py-3">
        <div class="container">
            <span class="text-muted">Stefan Girsberger, University College London, University of Manchester <a href="mailto:girsberger.stefan@gmail.com?subject=Research Dashboard">girsberger.stefan@gmail.com</a></span>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='tooltips.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    <script>$(document).ready(function(){  $('#myTable2').DataTable({buttons:['excel','csv','pdf']});});</script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.25/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/cr-1.5.4/fc-3.3.3/fh-3.1.9/kt-2.6.2/r-2.2.8/rr-1.2.8/datatables.min.js"></script>
    <script>(function() {  'use strict';  window.addEventListener('load', function() {        var forms = document.getElementsByClassName('needs-validation');        var validation = Array.prototype.filter.call(forms, function(form) {      form.addEventListener('submit', function(event) {        if (form.checkValidity() === false) {          event.preventDefault();          event.stopPropagation();        }        form.classList.add('was-validated');      }, false);    });  }, false);})();</script>
    <script type="text/javascript"> function spinner() {document.getElementById("img").style.display = "block";}</script>
    <script>$(document).ready(function(){$('#choosePlotType').on('change', function() {if ( this.value == '1'){$("#radarPlot").show();}else{$("#radarPlot").hide();}});});</script>
    <script>$(document).ready(function(){$('#choosePlotType').on('change', function() {if ( this.value == '2'){$("#barPlot").show();}else{$("#barPlot").hide();}});});</script>
    <script>$(document).ready(function(){$('.dropdown-toggle').dropdown();});</script>
</html>